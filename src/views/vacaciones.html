<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Vacaciones - Portal Empleado v2</title>
    <script>
        function getVacacionesData() {
            const params = new URLSearchParams(window.location.search);
            const view = params.get('view') || 'solicitar';
            let page = 'vacacionesSolicitar';

            if (view === 'firmar') page = 'vacacionesFirmar';
            else if (view === 'mis-vacaciones') page = 'vacacionesMis';

            let darkMode = false;
            try {
                darkMode = JSON.parse(localStorage.getItem('darkMode'));
            } catch (e) {
                console.warn('LocalStorage access denied', e);
            }

            return {
                page: page,
                view: view,
                loaded: true,
                darkMode: darkMode || false,
                stickyMenu: false,
                sidebarToggle: false,
                scrollTop: false
            };
        }
    </script>
</head>

<body x-data="getVacacionesData()"
    x-init="$watch('darkMode', value => localStorage.setItem('darkMode', JSON.stringify(value)))"
    :class="{'dark bg-gray-900': darkMode === true}">
    <!-- ===== Preloader Start ===== -->
    <include src="../includes/preloader.html"></include>
    <!-- ===== Preloader End ===== -->

    <!-- ===== Page Wrapper Start ===== -->
    <div class="flex h-screen overflow-hidden">
        <!-- ===== Sidebar Start ===== -->
        <include src="../includes/sidebar.html"></include>
        <!-- ===== Sidebar End ===== -->

        <!-- ===== Content Area Start ===== -->
        <div class="relative flex flex-col flex-1 overflow-x-hidden overflow-y-auto">
            <!-- Small Device Overlay Start -->
            <include src="../includes/overlay.html" />
            <!-- Small Device Overlay End -->

            <!-- ===== Header Start ===== -->
            <include src="../includes/header.html" />
            <!-- ===== Header End ===== -->

            <!-- ===== Main Content Start ===== -->
            <main>
                <div class="p-4 mx-auto max-w-(--breakpoint-2xl) md:p-6">
                    <div class="grid grid-cols-12 gap-4 md:gap-6">

                        <!-- Vacaciones Wizard (Solicitar) -->
                        <template x-if="view === 'solicitar'">
                            <include src="../includes/vacaciones-panel.html" />
                        </template>

                        <!-- Vacaciones Lists (Firmar, Ver...) -->
                        <template x-if="view !== 'solicitar'">
                            <include src="../includes/vacaciones-list.html" />
                        </template>

                    </div>
                </div>
            </main>
            <!-- ===== Main Content End ===== -->
        </div>
        <!-- ===== Content Area End ===== -->
    </div>
    <!-- ===== Page Wrapper End ===== -->

</body>

</html>